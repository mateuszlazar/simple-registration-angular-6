<h2>Registration</h2>
<form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register pure-form pure-form-aligned">
    <fieldset>
        <div class="pure-control-group">
                <label for="email">Email*</label>
                <input
                    type="email" 
                    formControlName="email"
                    class="form-control"
                    ngModel [email]="true"
                    [ngClass]="{ 'is-invalid': submitted && controls.email.errors }" 
                />
                <div *ngIf="submitted && controls.email.errors" class="form-error">
                    <p *ngIf="controls.email.errors.required">
                        Email is required
                    </p>
                    <p *ngIf="!controls.email.errors.required && controls.email.errors">
                        Email is invalid
                    </p>
                </div>
            </div>
            <div class="pure-control-group">
                <label for="password">Password*</label>
                <input
                    type="password"
                    formControlName="password"
                    class="form-control"
                    pattern="^(?=.{6,})(?=.*[A-Za-z1-9])(?=.*[@#$%^&+=]).*$"
                    [ngClass]="{ 'is-invalid': submitted && controls.password.errors }"
                />
                <div *ngIf="submitted && controls.password.errors" class="form-error">
                    <p *ngIf="controls.password.errors.required">
                        Password is required
                    </p>
                    <p *ngIf="controls.password.errors.pattern">
                        Password must have one letter or digit and at least one special character
                    </p>
                    <p *ngIf="controls.password.errors.minlength">
                        Password must be at least 6 characters
                    </p>
                </div>
            </div>
            <div class="pure-control-group button-group">
                <button [disabled]="loading" class="pure-button pure-button-primary">
                    <span *ngIf="!loading">Register</span>
                    <img 
                        *ngIf="loading"
                        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjMwIiB2aWV3Qm94PSIwIDAgMTIwIDMwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiPiAgICA8Y2lyY2xlIGN4PSIxNSIgY3k9IjE1IiByPSIxNSI+ICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJyIiBmcm9tPSIxNSIgdG89IjE1IiAgICAgICAgICAgICAgICAgYmVnaW49IjBzIiBkdXI9IjAuOHMiICAgICAgICAgICAgICAgICB2YWx1ZXM9IjE1Ozk7MTUiIGNhbGNNb2RlPSJsaW5lYXIiICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4gICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIgZnJvbT0iMSIgdG89IjEiICAgICAgICAgICAgICAgICBiZWdpbj0iMHMiIGR1cj0iMC44cyIgICAgICAgICAgICAgICAgIHZhbHVlcz0iMTsuNTsxIiBjYWxjTW9kZT0ibGluZWFyIiAgICAgICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+ICAgIDwvY2lyY2xlPiAgICA8Y2lyY2xlIGN4PSI2MCIgY3k9IjE1IiByPSI5IiBmaWxsLW9wYWNpdHk9IjAuMyI+ICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJyIiBmcm9tPSI5IiB0bz0iOSIgICAgICAgICAgICAgICAgIGJlZ2luPSIwcyIgZHVyPSIwLjhzIiAgICAgICAgICAgICAgICAgdmFsdWVzPSI5OzE1OzkiIGNhbGNNb2RlPSJsaW5lYXIiICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4gICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIgZnJvbT0iMC41IiB0bz0iMC41IiAgICAgICAgICAgICAgICAgYmVnaW49IjBzIiBkdXI9IjAuOHMiICAgICAgICAgICAgICAgICB2YWx1ZXM9Ii41OzE7LjUiIGNhbGNNb2RlPSJsaW5lYXIiICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4gICAgPC9jaXJjbGU+ICAgIDxjaXJjbGUgY3g9IjEwNSIgY3k9IjE1IiByPSIxNSI+ICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJyIiBmcm9tPSIxNSIgdG89IjE1IiAgICAgICAgICAgICAgICAgYmVnaW49IjBzIiBkdXI9IjAuOHMiICAgICAgICAgICAgICAgICB2YWx1ZXM9IjE1Ozk7MTUiIGNhbGNNb2RlPSJsaW5lYXIiICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4gICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIgZnJvbT0iMSIgdG89IjEiICAgICAgICAgICAgICAgICBiZWdpbj0iMHMiIGR1cj0iMC44cyIgICAgICAgICAgICAgICAgIHZhbHVlcz0iMTsuNTsxIiBjYWxjTW9kZT0ibGluZWFyIiAgICAgICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+ICAgIDwvY2lyY2xlPjwvc3ZnPg=="
                        class="loader"
                    />
                </button>
                <a [routerLink]="['/login']">Back to login</a>
            </div>
    </fieldset>
</form>
